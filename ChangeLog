2003-04-17  Angus Leeming  <angus.leeming@btopenworld.com>

	* demos/Imakefile:
	* fd2ps/Imakefile:
	* fdesign/Imakefile:
	* gl/Imakefile:
	* image/Imakefile:
	* lib/Imakefile: don't pass -Iprivate to the complier.

	* fdesign/fd_super.c:
	* fdesign/sp_browser.c:
	* fdesign/sp_choice.c:
	* fdesign/sp_counter.c:
	* fdesign/sp_dial.c:
	* fdesign/sp_menu.c:
	* fdesign/sp_positioner.c:
	* fdesign/sp_xyplot.c:
	* image/image_postscript.c:
	* image/postscript.c:
	* image/ps_core.c:
	* image/ps_draw.c:
	* image/ps_text.c:
	* lib/browser.c:
	* lib/canvas.c:
	* lib/choice.c:
	* lib/counter.c:
	* lib/dial.c:
	* lib/flinternal.h:
	* lib/formbrowser.c:
	* lib/menu.c:
	* lib/objects.c:
	* lib/positioner.c:
	* lib/scrollbar.c:
	* lib/sldraw.c:
	* lib/slider.c:
	* lib/textbox.c:
	* lib/thumbwheel.c:
	* lib/valuator.c:
	* lib/xyplot.c: associated changes to the #include directives.

2003-04-17  Angus Leeming  <angus.leeming@btopenworld.com>

	* lib/xforms.5: renamed as xforms.man. This probably breaks the
	installation, but that is all slated for change anyway.

2003-04-17  Angus Leeming  <angus.leeming@btopenworld.com>

	* demos/Imakefile: do not -Ifd when compiling.

	* demos/Imakefile:
	* demos/buttonall.c:
	* demos/demotest.c:
	* demos/dirlist.c:
	* demos/folder.c:
	* demos/formbrowser.c:
	* demos/ibrowser.c:
	* demos/inputall.c:
	* demos/itest.c:
	* demos/scrollbar.c:
	* demos/thumbwheel.c: associated changes.

	* demos/.cvsignore: add all the generated executables.

2003-04-17  Angus Leeming  <angus.leeming@btopenworld.com>

	* lib/include/canvas.h: cruft removal. Don't mention glcanvas.h
	here in case the user does not want GL support.

	* lib/include/forms.h
	* lib/forms.h: regenerated.

	* gl/glcanvas.c: include glcanvas.h as this is no longer in forms.h

2003-04-16  Angus Leeming  <angus.leeming@btopenworld.com>

	Remove the SNP directory and replace it with a single file,
	flsnprintf.c. Invoke snprintf through a wrapper fl_snprintf.

	* Imakefile: remove SUBDIR snp.

	* lib/flsnprintf.c, lib/include/flsnprintf.h: new files.

	* lib/include/Imakefile: add flsnprintf.h to the files used to
	generated forms.h.

	* lib/forms.h
	* lib/include/forms.h: regenerated.

	* lib/Imakefile: add flsnprintf.c.
	Pass -DHAVE_SNPRINTF as a compiler option.

	* lib/local.h: remove HAVE_SNPRINTF stuff.

	* demos/Imakefile:
	* fd2ps/Imakefile:
	* fdesign/Imakefile:
	* gl/Imakefile:
	* image/Imakefile:
	pass -DHAVE_SNPRINTF as a compiler option. Remove other SNP stuff.

	* demos/wwwl.c:
	* fdesign/fd_attribs.c:
	* image/image.c:
	* image/image_io_filter.c:
	* image/image_postscript.c:
	* lib/choice.c:
	* lib/cmd_br.c:
	* lib/errmsg.c:
	* lib/events.c:
	* lib/flresource.c:
	* lib/fselect.c:
	* lib/goodie_alert.c:
	* lib/goodie_choice.c:
	* lib/goodie_msg.c:
	* lib/goodie_salert.c:
	* lib/version.c:
	* lib/xpopup.c:
	s/\(v*snprintf\)/fl_\1/

	* snp/*: all files removed.

2003-04-15  Angus Leeming  <angus.leeming@btopenworld.com>

	* lots of files: reduce the amount of magic includes of header files
	and therefore include flinternal.h explicitly much more.

2003-04-15  Angus Leeming  <angus.leeming@btopenworld.com>

	* .cvsignore:
	* demos/.cvsignore:
	* fd2ps/.cvsignore:
	* fdesign/.cvsignore:
	* gl/.cvsignore:
	* image/.cvsignore:
	* libs/.cvsignore:
	* libs/include/.cvsignore: prepare the way for autoconf/automake.

2003-04-10  Angus Leeming  <angus.leeming@btopenworld.com>

	* lib/include/Basic.h: add FL_RESIZED to the FL_EVENTS enum.
	* lib/include/AAA.h: up FL_FIXLEVEL to 2 to reflect this.

	* lib/forms.h:
	* lib/include/forms.h: regenerated.

	* lib/forms.c (scale_form): pass event FL_RESIZED to the object handler
	if the object size is changed.

	* lib/tabfolder.c (handle): handle the FL_RESIZED event to ensure
	that the currently active folder is resized.

2003-04-10  Angus Leeming  <angus.leeming@btopenworld.com>

	* lib/version.c (fl_print_version, fl_library_version): use
	FL_VERSION, FL_REVISION rather than RCS stuff.

2003-04-10  Angus Leeming  <angus.leeming@btopenworld.com>

	* most files: Remove all the RCS strings from the header files
	and about half of 'em from the .c files.

2003-04-10  John Levon <moz@compsoc.man.ac.uk>

	* lib/pixmap.c (init_xpm_attributes): "fix" XPixmaps containing
	colour "opaque".

2003-04-09  Angus Leeming  <angus.leeming@btopenworld.com>

	* demos/.cvsignore:
	* snp/.cvsignore: Ignore Makefile*

2003-04-09  Angus Leeming  <angus.leeming@btopenworld.com>

	Move tabfolder-specific code out of forms.c and allow individual
	FL_OBJECTs to respond to such events. Means that the library
	becomes extensible to new, user-defined widgets once again.

	* lib/include/Basic.h: add FL_MOVEORIGIN to the FL_EVENTS enum.

	* lib/forms.h:
	* lib/include/forms.h: regenerated automatically.

	* lib/forms.c (fl_handle_form): no longer a static function.
	Dispatch FL_MOVEORIGIN events to the form's constituent objects.
	(fl_get_tabfolder_origin): removed. Functionality moved into
	tabfolder.c.
	(do_interaction_step): no longer call fl_get_tabfolder_origin. Instead,
	dispatch a call to fl_handle_form(form, FL_MOVEORIGIN, ...).

	* lib/tabfolder.c (handle): add FL_MOVEORIGIN to the event switch.
	Update the x,y absolute coords of the active_folder and dispatch
	a call to fl_handle_form(active_folder, FL_MOVEORIGIN, ...) to
	ensure that the x,y absolute coords of nested tabfolders are also
	updated.

2003-04-09  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* image/Imakefile (EXTRA_INCLUDES): change the order of includes,
	to avoid that an older installed forms.h is used instead of the
	fresh one

2003-04-09  Angus Leeming  <angus.leeming@btopenworld.com>

	* lib/objects.c (hide_tooltip): renamed as checked_hide_tooltip.
	(unconditional_hide_tooltip): new static helper function,
	invoked within fl_handle_it on FL_KEYPRESS and FL_PUSH events.

	* lib/include/AAA.h: up-ed FL_FIXLEVEL to 1 to reflect the changes
	made above.
	* lib/forms.h: regenerated to reflect changed FL_FIXLEVEL.

	* version.c (version): update to reflect this also.

2003-04-08  Angus Leeming  <angus.leeming@btopenworld.com>

	Enable tooltips to be shown correctly in "composite" widgets
	such as the browser.

	* lib/objects.c (get_parent): new static helper function. Given an
	FL_OBJECT*, returns its parent FL_OBJECT.
	(tooltip_handler): rewritten to show the tooltip that is stored
	by the parent FL_OBJECT.
	(hide_tooltip): new static helper function: on leaving an FL_OBJECT,
	only hide the tooltip if we have also left the bounds of the parent
	FL_OBJECT.
	(fl_handle_it): make use of these new functions to show and hide
	tooltips.

2003-04-08  Angus Leeming  <angus.leeming@btopenworld.com>

	* image/image_rotate.c (flimage_rotate): enable the rotation of
	grayscale images by 90degree multiples and more generally prevent
	other unsupported image types from crashing xforms.

	* lib/flresource.c (fl_initialize): clean-up properly if we fail to
	create input contexts or methods.

	* lib/textbox.c (handle_textbox):
	* lib/thumbwheel.c (handle):
	* lib/util.c (flevent): FL_KEYBOARD has been replaced by FL_KEYPRESS.
	The former is retained for compatability, but the latter should be
	used internally.
