#define TargetName fd2ps
#define Optimize NO

# $Locker:  $
# $Date: 2003/04/20 21:16:02 $
# $State: Exp $

# $Log: Imakefile,v $
# Revision 1.5  2003/04/20 21:16:02  leeming
# Pass the expected -DHAVE_SNPRINTF options to the compiler.
#
# Revision 1.4  2003/04/17 11:48:17  leeming
# Don't pass -Iprivate to the complier.
#
# Revision 1.3  2003/04/17 09:04:56  leeming
# Redo of snp stuff to avoid need for libformssnp.
#
# Revision 1.2  2003/04/15 19:21:42  leeming
# Further reductions in dirs included during compilation.
#
# Revision 1.1  2003/04/06 15:52:39  leeming
# Upload xforms 1.0 files to the repository.
#
#

SRCS	= \
	  align.c \
	  fd2ps.c \
	  flsupport.c \
	  image2ps.c \
	  load.c \
	  papers.c \
	  pscol.c \
	  psdraw.c \
	  psobj.c \
	  pstext.c \
	  readxpm.c \
	  sys.c \
	  version.c \
	  xbmtops.c \
	  xpmtops.c

#	Batteries not included.  Some assembly required.

OBJS	= $(SRCS:.c=.o)

#if HaveSnprintf
HAVE_SNPRINTF	= -DHAVE_SNPRINTF -DHAVE_DECL_SNPRINTF -DHAVE_DECL_VSNPRINTF
#endif

#if !defined( PpcDarwinArchitecture )
FORMSLIBDIR     = $(TOP)/lib
FORMSINCDIR     = $(FORMSLIBDIR)       
FORMSLIB        = -L$(FORMSLIBDIR) -lforms
DEPFORMSLIB     = $(FORMSLIBDIR)/libforms.a
#endif

IMAGELIBDIR     = $(TOP)/image
IMAGEINCDIR     = $(IMAGELIBDIR)       
IMAGELIB        = -L$(IMAGELIBDIR) -lflimage
DEPIMAGELIB     = $(IMAGELIBDIR)/libflimage.a

#if Solaris64Bit
LDPRELIB	= -L/usr/openwin/lib/sparcv9
#endif

EXTRA_INCLUDES  = \
		  -I$(BUILDINCDIR) \
		  -I$(FORMSINCDIR) \
		  -I.

DEPEND_DEFINES	= \
		  -I/usr/local/include

EXTRA_LIBRARIES	= \
		  $(STATIC) \
		  $(IMAGELIB) \
		  $(FORMSLIB) \
		  $(UNSTATIC) \
		  -lm

EXTRA_DEFINES	= \
		  -DMAKING_FD=1 \
		  $(HAVE_SNPRINTF)

PSRCS	= $(SPLSRCS) \
	  $(FDCSRCS)

CDEBUGFLAGS	= -g $(OPTIMIZER)
#if Optimize
IMAKE_OPTIMIZE  = -DDoOptimize=1
OPTIMIZER	= -O4
#else
OPTIMIZER	=
#endif

#if Solaris64Bit
LDPRELIB	= -L/usr/openwin/lib/sparcv9
CCENVSETUP	= LD_RUN_PATH=/usr/openwin/lib/sparcv9
#endif

#if StaticLink
STATIC		= -Xlinker -Bstatic
UNSTATIC	= -Xlinker -Bdynamic
#endif

IMAKE_DEFINES	= \
		  $(IMAKE_DEBUG_MEM) \
		  $(IMAKE_OPTIMIZE)

DEPLIBS		= \
		  $(DEPFORMSLIB)

SYS_LIBRARIES	= \
		  $(XLIB)


ComplexProgramTarget(TargetName)

#if InstallNonstandard
BINDIR		= XFormsNonstandardInstallDir/bin
#endif

distclean::
	make clean
	$(RM) Makefile
